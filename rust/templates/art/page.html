{% extends "base-template.html" %}

{% block title %}{{ title }}{% endblock %}

{% block customhead %}<script src="/static/js/art-page.js" ></script>{% endblock %}

{% block content %}
<div class="art-page-v2">

    <div class="art-display">
        {# Every art piece gets its respective display, and an invisible radio button, so we can have convenient art switching using the labels below. #}
        {% for art_url in art_urls %}
            <input type="radio" name="art" id="art-{{ loop.index }}" {% if loop.first %}checked{% endif %}/>

            {% if url_is_of_video(art_url) %}{# Url is a video #} 
                <video class="art-item" src="{{ art_url }}" controls autoplay></video>
            {% else %} {# Url is an image or gif #}
                <img class="art-item" src="{{ art_url }}" />
            {% endif %}
        {% endfor %}
    </div>
    
    {% if art_urls.len() > 1 -%}
        <div class="controls">
            {% for art_url in art_urls -%}
                <label for="art-{{ loop.index }}"></label>
            {% endfor -%}
        </div>
    {%- endif -%}

    <div class="info-and-arrows">
        {% if let Some(newer_url) = newer_art_url %}
        <a href="/art/{{ newer_url }}{{ user_search_params.to_uri_parameters(false) }}" class="arrow">
            <img src="/static/img/ui/next_arrow_left.png">
        </a>
        {% endif %}

        <div class="info">
            <p class="date">{{ formatted_creation_date }}</p>
            <h1>{{ title }}</h1>
            <h2>By: 
                {{ artists | join(", ") }}
            </h2>
            {% if let Some(description) = description -%}<div class="content">{{ description }}</div>{%- endif -%}
            <div class="tags">
                {%- for tag in tags -%}
                    <a class="tag" href="/art?tags={{ tag }}">{{ tag }}</a>
                {%- endfor -%}
            </div>
        </div>

        {% if let Some(older_url) = older_art_url %}
        <a href="/art/{{ older_url }}{{ user_search_params.to_uri_parameters(false) }}" class="arrow">
            <img src="/static/img/ui/prev_arrow_right.png">
        </a>
        {% endif %}
    </div>
</div>

{% endblock %}